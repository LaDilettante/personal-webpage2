<!doctype html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if (IE 7)&!(IEMobile)]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if (IE 8)&!(IEMobile)]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en"><!--<![endif]-->
<head>
<meta charset="utf-8">
<title>Interaction Term vs Split Sample &#8211; Anh Le</title>
<meta name="description" content="When an analyst wants to show heterogenous treatment effect (i.e. different treatment effect for different groups), should they 1) run one regression term with an interaction, or 2) run multiple regressions, one for each group (aka split sample)? A quick Google search shows how common this question is.

">
<meta name="keywords" content="">


<!-- Twitter Cards -->
<meta name="twitter:title" content="Interaction Term vs Split Sample">
<meta name="twitter:description" content="When an analyst wants to show heterogenous treatment effect (i.e. different treatment effect for different groups), should they 1) run one regression term with an interaction, or 2) run multiple regressions, one for each group (aka split sample)? A quick Google search shows how common this question is.

">
<meta name="twitter:site" content="@anh_q_le">
<meta name="twitter:creator" content="@anh_q_le">

<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="/images/default-thumb.png">

<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="Interaction Term vs Split Sample">
<meta property="og:description" content="When an analyst wants to show heterogenous treatment effect (i.e. different treatment effect for different groups), should they 1) run one regression term with an interaction, or 2) run multiple regressions, one for each group (aka split sample)? A quick Google search shows how common this question is.

">
<meta property="og:url" content="/interaction-term/">
<meta property="og:site_name" content="Anh Le">

<meta property="og:image" content="/images/default-thumb.png">






<link rel="canonical" href="/interaction-term/">
<link href="/~aql3/feed.xml" type="application/atom+xml" rel="alternate" title="Anh Le Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<!-- For all browsers -->
<link rel="stylesheet" href="/~aql3/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<!-- HTML5 Shiv and Media Query Support -->
<!--[if lt IE 9]>
	<script src="/~aql3/assets/js/vendor/html5shiv.min.js"></script>
	<script src="/~aql3/assets/js/vendor/respond.min.js"></script>
<![endif]-->

<!-- Modernizr -->
<script src="/~aql3/assets/js/vendor/modernizr-2.7.1.custom.min.js"></script>

<link href='//fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700%7CPT+Serif:400,700,400italic' rel='stylesheet' type='text/css'>

<!-- Icons -->
<!-- 16x16 -->
<link rel="shortcut icon" href="/~aql3/favicon.ico">
<!-- 32x32 -->
<link rel="shortcut icon" href="/~aql3/favicon.png">
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="/~aql3/images/apple-touch-icon-precomposed.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="/~aql3/images/apple-touch-icon-72x72-precomposed.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="/~aql3/images/apple-touch-icon-114x114-precomposed.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="/~aql3/images/apple-touch-icon-144x144-precomposed.png">

</head>

<body class="post">

<!--[if lt IE 9]><div class="browser-upgrade alert alert-info">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div><![endif]-->

<div class="navigation-wrapper">
	<div class="site-name">
		<a href="/~aql3">Anh Le</a>
	</div><!-- /.site-name -->
	<div class="top-navigation">
		<nav id="site-nav" class="nav">
		    <ul>
		        
				    
				    <li><a href="/~aql3/about/" >About</a></li>
				
				    
				    <li><a href="/~aql3/posts/" >Posts</a></li>
				
				    
				    <li><a href="/~aql3/learning/" >Learning</a></li>
				
				    
				    <li><a href="http://paint-by-number.github.io/" target="_blank">Data Visualization</a></li>
				
		    </ul>
		</nav>
	</div><!-- /.top-navigation -->
</div><!-- /.navigation-wrapper -->




<div id="main" role="main">
  <div class="article-author-side">
    

<div itemscope itemtype="http://schema.org/Person">


	<img src="/~aql3/images/bio-photo.jpg" class="bio-photo" alt="Anh Le bio photo">


  <h3 itemprop="name">Anh Le</h3>
  <p>PhD candidate in Political Economy at Duke. Social science, statistics, and programming.</p>
  <a href="mailto:anh.le91@gmail.com" class="author-social" target="_blank"><i class="fa fa-fw fa-envelope-square"></i> Email</a>
  <a href="http://twitter.com/anh_q_le" class="author-social" target="_blank"><i class="fa fa-fw fa-twitter-square"></i> Twitter</a>
  
  
  <a href="http://linkedin.com/in/anhqle" class="author-social" target="_blank"><i class="fa fa-fw fa-linkedin-square"></i> LinkedIn</a>
  
  
  
  <a href="http://github.com/LaDilettante" class="author-social" target="_blank"><i class="fa fa-fw fa-github"></i> Github</a>
  
  
  
  
  
  
  
  
  
  
  
</div>

<form method='post' action='http://blogtrottr.com'>
    Your email: <input type='text' name='btr_email' /><br />
    <input type='hidden' name='btr_url' value="/~aql3/feed.xml" />
    <input type='hidden' name='schedule_type' value='0' />
    <input type='submit' value='Follow this feed via email' />
</form>

  </div>
  <article class="post">
    <div class="headline-wrap">
      
        <h1><a href="/~aql3/interaction-term/" rel="bookmark" title="Interaction Term vs Split Sample">Interaction Term vs Split Sample</a></h1>
      
    </div><!--/ .headline-wrap -->
    <div class="article-wrap">
      <p>When an analyst wants to show heterogenous treatment effect (i.e. different treatment effect for different groups), should they 1) run one regression term with an interaction, or 2) run multiple regressions, one for each group (aka split sample)? <a href="https://www.google.com/search?q=split+sample+vs+interaction+term">A quick Google search shows how common this question is.</a></p>

<p>In this post, I will show:</p>

<ol>
  <li>
    <p><a href="#comparison">Split sample is analogous to running a regression with an interaction term for all predictors</a></p>
  </li>
  <li>
    <p><a href="#split-is-bad">Using split sample to show heterogenous treatment effect is a bad idea</a></p>
  </li>
</ol>

<p>We have outcome <script type="math/tex">y</script>, independent variable of interest <script type="math/tex">X_{\text{int}}</script>, an exogenous covariate <script type="math/tex">X_{\text{cov}}</script>, and group indicator <script type="math/tex">G \in \{A, B\}</script>. We are interested in estimating the effect of <script type="math/tex">X_{\text{int}}</script> on <script type="math/tex">y</script>, and whether the effect is different across groups <script type="math/tex">A</script> and <script type="math/tex">B</script>.</p>

<p><a name="comparison"></a></p>

<h2 id="split-sample-is-analogous-to-a-fully-interacted-regression">Split sample is analogous to a fully interacted regression</h2>

<p>In a split sample analysis, we fit one regression for each group, allowing the coefficients for all <script type="math/tex">X</script>’s (i.e. both <script type="math/tex">X_{\text{int}}</script>, and <script type="math/tex">\beta_{\text{cov}}</script>) to vary. This is equivalent to running a fully interacted regression as I’ll show below.</p>

<p>Let the true data-generating process (DGP) be a fully interacted model, i.e. both <script type="math/tex">X_\text{int}</script> and <script type="math/tex">X_\text{cov}</script> having a different effects on <script type="math/tex">y</script> across groups.</p>

<p>Here’s the DGP in math:
<script type="math/tex">% <![CDATA[
\begin{align}
y &= \beta_0 + \beta_{int} X_\text{int} + \beta_{cov} X_\text{cov} + \beta_G G + \beta_{intG} X_\text{int} G + \beta_{covG} X_\text{cov} G + \epsilon
\end{align} %]]></script></p>

<p>Here’s the DGP simulated in R:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># Generate the Xs and G
</span><span class="n">n</span> <span class="o">&lt;-</span> <span class="m">1000</span>
<span class="n">group</span> <span class="o">&lt;-</span> <span class="n">sample</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="s2">"A"</span><span class="p">,</span> <span class="s2">"B"</span><span class="p">),</span> <span class="n">size</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span> <span class="n">prob</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="m">0.5</span><span class="p">,</span> <span class="m">0.5</span><span class="p">),</span> <span class="n">replace</span> <span class="o">=</span> <span class="n">T</span><span class="p">)</span>
<span class="n">X_int</span> <span class="o">&lt;-</span> <span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>
<span class="n">X_cov</span> <span class="o">&lt;-</span> <span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="c1"># The DGP that generates y
</span><span class="n">y</span> <span class="o">&lt;-</span> <span class="m">1</span> <span class="o">+</span> <span class="m">2</span> <span class="o">*</span> <span class="n">X_int</span> <span class="o">+</span> <span class="m">3</span> <span class="o">*</span> <span class="n">X_cov</span> <span class="o">+</span> <span class="m">4</span> <span class="o">*</span> <span class="p">(</span><span class="n">group</span><span class="o">==</span><span class="s2">"B"</span><span class="p">)</span> <span class="o">+</span> 
  <span class="m">5</span> <span class="o">*</span> <span class="n">X_int</span> <span class="o">*</span> <span class="p">(</span><span class="n">group</span><span class="o">==</span><span class="s2">"B"</span><span class="p">)</span> <span class="o">+</span> <span class="m">6</span> <span class="o">*</span> <span class="n">X_cov</span> <span class="o">*</span> <span class="p">(</span><span class="n">group</span><span class="o">==</span><span class="s2">"B"</span><span class="p">)</span> <span class="o">+</span> <span class="n">rnorm</span><span class="p">(</span><span class="n">n</span><span class="p">)</span>

<span class="n">data</span> <span class="o">&lt;-</span> <span class="n">data.frame</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">X_int</span><span class="p">,</span> <span class="n">X_cov</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span></code></pre></figure>

<p>We then run three regressions, 1) full interaction, 2) split sample (group A only), 3) split sample (group B only).</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">stargazer</span><span class="p">(</span>
  <span class="n">lm</span><span class="p">(</span><span class="n">y</span> <span class="o">~</span> <span class="n">X_int</span> <span class="o">+</span> <span class="n">X_cov</span> <span class="o">+</span> <span class="n">group</span> <span class="o">+</span> <span class="n">X_int</span><span class="o">:</span><span class="n">group</span> <span class="o">+</span> <span class="n">X_cov</span><span class="o">:</span><span class="n">group</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">),</span>
  <span class="n">lm</span><span class="p">(</span><span class="n">y</span> <span class="o">~</span> <span class="n">X_int</span> <span class="o">+</span> <span class="n">X_cov</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">$</span><span class="n">group</span> <span class="o">==</span> <span class="s2">"A"</span><span class="p">,</span> <span class="p">]),</span>
  <span class="n">lm</span><span class="p">(</span><span class="n">y</span> <span class="o">~</span> <span class="n">X_int</span> <span class="o">+</span> <span class="n">X_cov</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">$</span><span class="n">group</span> <span class="o">==</span> <span class="s2">"B"</span><span class="p">,</span> <span class="p">]),</span>
  <span class="n">column.labels</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="s2">"fully interacted |"</span><span class="p">,</span> <span class="s2">"| group A |"</span><span class="p">,</span>
                    <span class="s2">"| group B"</span><span class="p">),</span>
  <span class="n">keep.stat</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="s2">"n"</span><span class="p">,</span> <span class="s2">"rsq"</span><span class="p">),</span> <span class="n">type</span> <span class="o">=</span> <span class="s2">"html"</span>
<span class="p">)</span></code></pre></figure>

<table style="text-align:center"><tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"></td><td colspan="3"><em>Dependent variable:</em></td></tr>
<tr><td></td><td colspan="3" style="border-bottom: 1px solid black"></td></tr>
<tr><td style="text-align:left"></td><td colspan="3">y</td></tr>
<tr><td style="text-align:left"></td><td>fully interacted |</td><td>| group A |</td><td>| group B</td></tr>
<tr><td style="text-align:left"></td><td>(1)</td><td>(2)</td><td>(3)</td></tr>
<tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">X_int</td><td>2.001<sup>***</sup></td><td>2.001<sup>***</sup></td><td>7.039<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.042)</td><td>(0.042)</td><td>(0.046)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">X_cov</td><td>2.983<sup>***</sup></td><td>2.983<sup>***</sup></td><td>8.913<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.046)</td><td>(0.046)</td><td>(0.047)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">groupB</td><td>4.001<sup>***</sup></td><td></td><td></td></tr>
<tr><td style="text-align:left"></td><td>(0.064)</td><td></td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">X_int:groupB</td><td>5.039<sup>***</sup></td><td></td><td></td></tr>
<tr><td style="text-align:left"></td><td>(0.062)</td><td></td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">X_cov:groupB</td><td>5.930<sup>***</sup></td><td></td><td></td></tr>
<tr><td style="text-align:left"></td><td>(0.066)</td><td></td><td></td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td></tr>
<tr><td style="text-align:left">Constant</td><td>1.014<sup>***</sup></td><td>1.014<sup>***</sup></td><td>5.016<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.045)</td><td>(0.045)</td><td>(0.045)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td><td></td></tr>
<tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">Observations</td><td>1,000</td><td>506</td><td>494</td></tr>
<tr><td style="text-align:left">R<sup>2</sup></td><td>0.986</td><td>0.931</td><td>0.992</td></tr>
<tr><td colspan="4" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"><em>Note:</em></td><td colspan="3" style="text-align:right"><sup>*</sup>p&lt;0.1; <sup>**</sup>p&lt;0.05; <sup>***</sup>p&lt;0.01</td></tr>
</table>

<p>We see the all coefficients in <code class="highlighter-rouge">(2) A only</code> differ from <code class="highlighter-rouge">(3) B only</code>, not just the <script type="math/tex">\beta_{\text{int}}</script> of <script type="math/tex">X_{\text{int}}</script>. Furthermore, we can calculate the split sample coefficients from the fully interacted model.</p>

<script type="math/tex; mode=display">% <![CDATA[
\begin{align}
\beta_{intA} &= \beta_{int} \\
\beta_{intB} &= \beta_{int} + \beta_{intG}
\end{align} %]]></script>

<p><strong>Take-away</strong>: Since it’s equivalent to a fully interacted model, split sample analysis shows how <em>all</em> coefficients (not just the coefficient of the variable of interest) differ across group.</p>

<p><a name="split-is-bad"></a></p>

<h2 id="why-split-sample-is-a-bad-way-to-show-heterogenous-treatment-effect">Why split sample is a bad way to show heterogenous treatment effect</h2>

<p>A very common use of split sample analysis is to run separate regressions and, upon observing that the coefficient <script type="math/tex">\beta_{int}</script> for <script type="math/tex">X_{\text{int}}</script> is significant for group <script type="math/tex">A</script> and insignificant for group <script type="math/tex">B</script>, conclude that its treatment effect is different across groups.</p>

<p>This is wrong because the significance of <script type="math/tex">X_{int}</script> depends on other covariates as well. For example, if there is high multicollinearity in group A between <script type="math/tex">X_{int}</script> and <script type="math/tex">X_{cov}</script>, then <script type="math/tex">X_{int}</script> will be statistically insignificant even if its effect in group <script type="math/tex">A</script> is just as strong as its effect in group <script type="math/tex">B</script>.</p>

<p>For a substantive example, we could imagine that we want to estimate the effect of income (<script type="math/tex">X_{int}</script>) on happiness (<script type="math/tex">y</script>) across two groups of people, urban and rural dwellers (<script type="math/tex">G</script>). It happens that the length of commute (<script type="math/tex">X_{cov}</script>) matters for happiness too, and the commute is highly correlated with income <em>only for urban dwellers</em>. Thus, if we run a split sample analysis, income will have an insignificant coefficient for urban dwellers because of a high multicollinearity, despite having a real impact on happiness.</p>

<p>We simulate that scenario below:</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">library</span><span class="p">(</span><span class="n">mvtnorm</span><span class="p">)</span>
<span class="n">set.seed</span><span class="p">(</span><span class="m">2</span><span class="p">)</span>

<span class="c1"># high multi-collinearity in group A (cor = 0.8)
</span><span class="n">Xs_A</span> <span class="o">&lt;-</span> <span class="n">rmvnorm</span><span class="p">(</span><span class="m">100</span><span class="p">,</span> <span class="n">mean</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span> 
                 <span class="n">sigma</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">0.8</span><span class="p">,</span> <span class="m">0.8</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">2</span><span class="p">))</span>
<span class="n">X_intA</span> <span class="o">&lt;-</span> <span class="n">Xs_A</span><span class="p">[,</span> <span class="m">1</span><span class="p">]</span> <span class="p">;</span> <span class="n">X_covA</span> <span class="o">&lt;-</span> <span class="n">Xs_A</span><span class="p">[,</span> <span class="m">2</span><span class="p">]</span>

<span class="c1"># low multicollinearity in group B (cor = 0)
</span><span class="n">Xs_B</span> <span class="o">&lt;-</span> <span class="n">rmvnorm</span><span class="p">(</span><span class="m">100</span><span class="p">,</span> <span class="n">mean</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">),</span>
                 <span class="n">sigma</span> <span class="o">=</span> <span class="n">matrix</span><span class="p">(</span><span class="n">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">0</span><span class="p">,</span> <span class="m">1</span><span class="p">),</span> <span class="n">nrow</span> <span class="o">=</span> <span class="m">2</span><span class="p">))</span>
<span class="n">X_intB</span> <span class="o">&lt;-</span> <span class="n">Xs_B</span><span class="p">[,</span> <span class="m">1</span><span class="p">]</span> <span class="p">;</span> <span class="n">X_covB</span> <span class="o">&lt;-</span> <span class="n">Xs_B</span><span class="p">[,</span> <span class="m">2</span><span class="p">]</span>

<span class="c1"># Combine the data from two groups
</span><span class="n">X_int</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="n">X_intA</span><span class="p">,</span> <span class="n">X_intB</span><span class="p">)</span>
<span class="n">X_cov</span> <span class="o">&lt;-</span> <span class="n">c</span><span class="p">(</span><span class="n">X_covA</span><span class="p">,</span> <span class="n">X_covB</span><span class="p">)</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="n">rep</span><span class="p">(</span><span class="s2">"A"</span><span class="p">,</span> <span class="m">100</span><span class="p">),</span> <span class="n">rep</span><span class="p">(</span><span class="s2">"B"</span><span class="p">,</span> <span class="m">100</span><span class="p">))</span>

<span class="c1"># True DGP has NO INTERACTION EFFECT
</span><span class="n">y</span> <span class="o">&lt;-</span> <span class="m">1</span> <span class="o">+</span> <span class="m">2</span> <span class="o">*</span> <span class="n">X_int</span> <span class="o">+</span> <span class="m">3</span> <span class="o">*</span> <span class="n">X_cov</span> <span class="o">+</span> <span class="m">4</span> <span class="o">*</span> <span class="p">(</span><span class="n">group</span><span class="o">==</span><span class="s2">"B"</span><span class="p">)</span> <span class="o">+</span> <span class="n">rnorm</span><span class="p">(</span><span class="m">100</span><span class="p">,</span> <span class="n">sd</span> <span class="o">=</span> <span class="m">4</span><span class="p">)</span></code></pre></figure>

<p>Notice that the true DGP has no interaction effect. However, if we use split sample analysis, we will see that <script type="math/tex">\beta_{int}</script> is insigificant in group <script type="math/tex">A</script>, and significant in group <script type="math/tex">B</script>. Hence, we would wrongly conclude that there is an interaction effect between <script type="math/tex">X_{int}</script> and <script type="math/tex">G</script>.</p>

<figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="n">data</span> <span class="o">&lt;-</span> <span class="n">data.frame</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="n">X_int</span><span class="p">,</span> <span class="n">X_cov</span><span class="p">,</span> <span class="n">group</span><span class="p">)</span>
<span class="n">stargazer</span><span class="p">(</span>
  <span class="n">lm</span><span class="p">(</span><span class="n">y</span> <span class="o">~</span> <span class="n">X_int</span> <span class="o">+</span> <span class="n">X_cov</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">$</span><span class="n">group</span> <span class="o">==</span> <span class="s2">"A"</span><span class="p">,</span> <span class="p">]),</span>
  <span class="n">lm</span><span class="p">(</span><span class="n">y</span> <span class="o">~</span> <span class="n">X_int</span> <span class="o">+</span> <span class="n">X_cov</span><span class="p">,</span> <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[</span><span class="n">data</span><span class="o">$</span><span class="n">group</span> <span class="o">==</span> <span class="s2">"B"</span><span class="p">,</span> <span class="p">]),</span>
  <span class="n">keep.stat</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="s2">"n"</span><span class="p">),</span> <span class="n">column.labels</span> <span class="o">=</span> <span class="n">c</span><span class="p">(</span><span class="s2">"group A"</span><span class="p">,</span> <span class="s2">"group B"</span><span class="p">),</span> <span class="n">type</span> <span class="o">=</span> <span class="s1">'html'</span>
<span class="p">)</span></code></pre></figure>

<table style="text-align:center"><tr><td colspan="3" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"></td><td colspan="2"><em>Dependent variable:</em></td></tr>
<tr><td></td><td colspan="2" style="border-bottom: 1px solid black"></td></tr>
<tr><td style="text-align:left"></td><td colspan="2">y</td></tr>
<tr><td style="text-align:left"></td><td>group A</td><td>group B</td></tr>
<tr><td style="text-align:left"></td><td>(1)</td><td>(2)</td></tr>
<tr><td colspan="3" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">X_int</td><td>0.606</td><td>1.801<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.616)</td><td>(0.419)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td></tr>
<tr><td style="text-align:left">X_cov</td><td>3.691<sup>***</sup></td><td>2.458<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.595)</td><td>(0.394)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td></tr>
<tr><td style="text-align:left">Constant</td><td>0.504</td><td>4.563<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.393)</td><td>(0.422)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td></tr>
<tr><td colspan="3" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">Observations</td><td>100</td><td>100</td></tr>
<tr><td colspan="3" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"><em>Note:</em></td><td colspan="2" style="text-align:right"><sup>*</sup>p&lt;0.1; <sup>**</sup>p&lt;0.05; <sup>***</sup>p&lt;0.01</td></tr>
</table>

<p>What’s worrisome is that we really can’t know how the statistical significance will turn out in a split sample analysis. Below I re-run exactly the same analysis, only using a different random seed, and we now conclude (correctly, but with the wrong methodology) that there’s no interaction effect.</p>

<table style="text-align:center"><tr><td colspan="3" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"></td><td colspan="2"><em>Dependent variable:</em></td></tr>
<tr><td></td><td colspan="2" style="border-bottom: 1px solid black"></td></tr>
<tr><td style="text-align:left"></td><td colspan="2">y</td></tr>
<tr><td style="text-align:left"></td><td>group A</td><td>group B</td></tr>
<tr><td style="text-align:left"></td><td>(1)</td><td>(2)</td></tr>
<tr><td colspan="3" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">X_int</td><td>3.392<sup>***</sup></td><td>1.663<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.839)</td><td>(0.458)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td></tr>
<tr><td style="text-align:left">X_cov</td><td>1.143</td><td>2.790<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.824)</td><td>(0.480)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td></tr>
<tr><td style="text-align:left">Constant</td><td>0.813<sup>*</sup></td><td>4.856<sup>***</sup></td></tr>
<tr><td style="text-align:left"></td><td>(0.462)</td><td>(0.474)</td></tr>
<tr><td style="text-align:left"></td><td></td><td></td></tr>
<tr><td colspan="3" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left">Observations</td><td>100</td><td>100</td></tr>
<tr><td colspan="3" style="border-bottom: 1px solid black"></td></tr><tr><td style="text-align:left"><em>Note:</em></td><td colspan="2" style="text-align:right"><sup>*</sup>p&lt;0.1; <sup>**</sup>p&lt;0.05; <sup>***</sup>p&lt;0.01</td></tr>
</table>

<p><strong>Take-away:</strong> Don’t use split sample analysis to show heterogenous treatment effect for one variable of interest.</p>

<h2 id="what-if-you-do-want-to-examine-heterogenous-treatment-effect-for-all-variables">What if you do want to examine heterogenous treatment effect for all variables?</h2>

<p>In this case, I would recommend <a href="http://www.stat.columbia.edu/~gelman/arm/">a multi-level model</a>, which allows co-varying intercepts and coefficients across groups.</p>

      <hr />
      <footer role="contentinfo">
        <div class="social-share">
  <h4>Share on</h4>
  <ul>
    <li>
      <a href="https://twitter.com/intent/tweet?text=/interaction-term/" class="twitter" title="Share on Twitter"><i class="fa fa-twitter"></i><span> Twitter</span></a>
    </li>
    <li>
      <a href="https://www.facebook.com/sharer/sharer.php?u=/interaction-term/" class="facebook" title="Share on Facebook"><i class="fa fa-facebook"></i><span> Facebook</span></a>
    </li>
    <li>
      <a href="https://plus.google.com/share?url=/interaction-term/" class="google-plus" title="Share on Google Plus"><i class="fa fa-google-plus"></i><span> Google+</span></a>
    </li>
  </ul>
</div><!-- /.social-share -->
        <p class="byline"><strong>Interaction Term vs Split Sample</strong> was published on <time datetime="2016-02-17T07:00:00-05:00">February 17, 2016</time>.</p>
      </footer>
    </div><!-- /.article-wrap -->
  
  </article>
</div><!-- /#main -->

<div class="footer-wrap">
  
  <div class="related-articles">
  <h4>You might also enjoy <small class="pull-right">(<a href="/~aql3/posts/">View all posts</a>)</small></h4>
    <ul>
    
      <li><a href="/~aql3/comparing-rstudio-and-spyder/" title="Comparing RStudio and Spyder">Comparing RStudio and Spyder</a></li>
    
      <li><a href="/~aql3/explain-the-inverse-cdf-method/" title="Explain The Inverse Cdf Method">Explain The Inverse Cdf Method</a></li>
    
      <li><a href="/~aql3/rstudio-cannot-load-rjava-in-ubuntu/" title="Fix the libjvm.so file not found error">Fix the libjvm.so file not found error</a></li>
    
    </ul>
    <hr />
  </div><!-- /.related-articles -->
  
  <footer>
    

<span>&copy; 2016 Anh Le. Powered by <a href="http://jekyllrb.com" rel="nofollow">Jekyll</a> using the <a href="https://mademistakes.com/work/minimal-mistakes-jekyll-theme/" rel="nofollow">Minimal Mistakes</a> theme.</span>

  </footer>
</div><!-- /.footer-wrap -->

<script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src="/~aql3/assets/js/vendor/jquery-1.9.1.min.js"><\/script>')</script>
<script src="/~aql3/assets/js/scripts.min.js"></script>


  




</body>
</html>
